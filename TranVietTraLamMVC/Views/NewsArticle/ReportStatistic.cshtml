@model IEnumerable<TranVietTraLamMVC_Services.DTO.Request.GetAllNewsArticle>

@{
    Layout = null;
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Report Statistic</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4">Report Statistic - News Articles</h2>

    <!-- Filter Form -->
    <form method="get" asp-action="FilterByDate" class="row g-3 mb-4">
        <div class="col-md-4">
            <label class="form-label">Start Date</label>
            <input type="date" name="startDate" class="form-control" required />
        </div>
        <div class="col-md-4">
            <label class="form-label">End Date</label>
            <input type="date" name="endDate" class="form-control" required />
        </div>
        <div class="col-md-4 d-flex align-items-end">
            <button type="submit" class="btn btn-primary">Filter</button>
        </div>
    </form>

    <!-- Return Button -->
    <a class="btn btn-outline-primary btn-sm mb-3 shadow-sm rounded d-inline-flex align-items-center" asp-area="" asp-controller="SystemAccount" asp-action="Admin">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left-circle me-2" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path fill-rule="evenodd" d="M8.354 11.354a.5.5 0 0 0 0-.708L6.707 9H11.5a.5.5 0 0 0 0-1H6.707l1.647-1.646a.5.5 0 0 0-.708-.708l-2.5 2.5a.5.5 0 0 0 0 .708l2.5 2.5a.5.5 0 0 0 .708 0z"/>
        </svg>
        Return
    </a>

    <!-- Error Message -->
    @if (ViewBag.Error != null)
    {
        <div class="alert alert-warning">@ViewBag.Error</div>
    }

    <!-- Articles Table -->
    @if (Model != null && Model.Any())
    {
        <table class="table table-bordered table-striped">
            <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Title</th>
                <th>Headline</th>
                <th>Created Date</th>
                <th>Content</th>
                <th>Source</th>
                <th>Category</th>
                <th>UserId</th>
                <th>Tags</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var article in Model)
            {
                <tr>
                    <td>@article.NewsArticleId</td>
                    <td>@article.NewsTitle</td>
                    <td>@article.Headline</td>
                    <td>@(article.CreatedDate?.ToString("yyyy-MM-dd") ?? "N/A")</td>
                    <td>@(article.NewsContent?.Length > 100 ? article.NewsContent.Substring(0, 100) + "..." : article.NewsContent ?? "N/A")</td>
                    <td>@article.NewsSource</td>
                    <td>@article.CategoryId</td>
                    <td>@article.CreatedById</td>
                    <td>
                        @if (article.Tags != null && article.Tags.Any())
                        {
                            foreach (var tag in article.Tags)
                            {
                                <span class="badge bg-primary me-1">@tag.TagName</span>
                            }
                        }
                        else
                        {
                            <span>No tags</span>
                        }
                    </td>
                </tr>
            }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-info">No articles available.</div>
    }
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
